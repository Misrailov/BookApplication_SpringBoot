<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Guest</title>
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css"
	integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
	crossorigin="anonymous">
<link rel="stylesheet" th:href="@{/css/new.css}" />

</head>
<body>
	<div th:insert="navbar :: navbar"></div>
	<div class="inhoud">
		<h1>New Book Page</h1>
		<h2>Add A new Book</h2>
		<form action="#" th:action="@{/book/new}" th:object="${bookForm}"
			method="post">



			<p>
				<label th:text="#{Naam_Input_Label}"> </label> <input type="text"
					th:field="*{book.naam}" /> <span
					th:if="${#fields.hasErrors('book.aankoopprijs')}"
					th:errorclass="error" th:errors="*{book.aankoopprijs}"></span>
			</p>
			<p>
				<label th:text="#{ISBNNumber_Input_Label}"> </label> <input
					type="text" th:field="*{book.ISBNNumber}" /> <span
					th:if="${#fields.hasErrors('book.ISBNNumber')}"
					th:errorclass="error" th:errors="*{book.ISBNNumber}"></span>
			</p>
			<p>
				<label th:text="#{Aankoopprijs_Input_Label}"> </label> <input
					type="text" th:field="*{book.aankoopprijs}" /> <span
					th:if="${#fields.hasErrors('book.aankoopprijs')}"
					th:errorclass="error" th:errors="*{book.aankoopprijs}"></span>

			</p>
			<h5>Authors</h5>

			<p>
				<label th:text="#{Auteur_Input_Label} +  ' '+ 1"> </label> <input
					type="text" th:field="*{auteurs[1].naam}" /> <span
					th:if="${#fields.hasErrors('auteurs[1].naam')}"
					th:errorclass="error" th:errors="*{auteurs[1].naam}"></span> <input
					type="text" th:field="*{auteurs[1].firstname}" /> <span
					th:if="${#fields.hasErrors('auteurs[1].firstname')}"
					th:errorclass="error" th:errors="*{auteurs[1].firstname}"></span>
			</p>
			<p>
				<label th:text="#{Auteur_Input_Label} +  ' '+ 2"> </label> <input
					disabled id="inputAuthor1" type="text"
					th:field="*{auteurs[0].naam}" /> <span
					th:if="${#fields.hasErrors('auteurs[0].naam')}"
					th:errorclass="error" th:errors="*{auteurs[0].naam}"></span> <input
					type="text" th:field="*{auteurs[0].firstname}"
					id="inputAuthorLast1" disabled /> <span
					th:if="${#fields.hasErrors('auteurs[0].firstname')}"
					th:errorclass="error" th:errors="*{auteurs[0].firstname}"></span>
				<button type="button" value="1" id="authorBtn1"
					onclick="toggleText(event)">Add Author</button>
			</p>

			<p>
				<label th:text="#{Auteur_Input_Label} +  ' '+ 3"> </label> <input
					disabled type="text" th:field="*{auteurs[2].naam}"
					id="inputAuthor2" /> <span
					th:if="${#fields.hasErrors('auteurs[2].naam')}"
					th:errorclass="error" th:errors="*{auteurs[2].naam}"></span> <input
					id="inputAuthorLast2" disabled type="text"
					th:field="*{auteurs[2].firstname}" /> <span
					th:if="${#fields.hasErrors('auteurs[2].firstname')}"
					th:errorclass="error" th:errors="*{auteurs[2].firstname}"></span>

				<button type="button" id="authorBtn2" value="2"
					onclick="toggleText(event)">Add Author</button>

			</p>
			<span id="authorError">To add a third Author, you first have
				to add a second one!</span>
			</h6>
			<h5>Locations</h5>
			<p>
				<input type="submit" value="Submit" /> <input type="reset"
					value="Reset" />
			</p>

		</form>
	</div>
	<script>
		function handleISBNChange(event) {
			console.log(event)
			console.log(bookForm)
		}

		function toggleText(event) {
			let button = document.getElementById(event.target.id);
			let input = document.getElementById("inputAuthor"
					+ event.target.value);
			let input2 = document.getElementById("inputAuthorLast"
					+ event.target.value);
			let id = parseInt(button.value) + 1
			let OriginaltextName = "Last Name " + id
			let OriginaltextFirstName = "First Name " + id
			errorMsg = document.getElementById("authorError")
			if (document.getElementById("inputAuthor1").disabled == true
					&& event.target.id === "authorBtn2"
					&& button.innerHTML != "Remove Author") {

				errorMsg.style.display = "block";

			} else {
				errorMsg.style.display = "none";
				if (button.innerHTML === "Add Author") {

					input.disabled = false
					input2.disabled = false
					button.innerHTML = "Remove Author";
				} else {
					input.disabled = true
					input2.disabled = true
					input.value = OriginaltextName
					input2.value = OriginaltextFirstName

					button.innerHTML = "Add Author";
				}
			}
		}
	</script>
</body>
</html>